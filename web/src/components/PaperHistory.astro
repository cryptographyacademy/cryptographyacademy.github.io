---
interface Props {
  slug: string;
}

const { slug } = Astro.props;

import history from '../data/papers-history.json';

const REPO = 'https://github.com/BaDaaS/cryptography.academy';

const entries = (history as Record<string, Array<{
  hash: string;
  fullHash: string;
  date: string;
  message: string;
}>>)[slug] ?? [];
---

{entries.length > 0 && (
  <section class="mt-12 border-t border-gray-800 pt-6">
    <h2 class="text-sm font-semibold text-gray-400 mb-3">History</h2>
    <ul class="space-y-1 text-xs font-mono">
      {entries.map(e => (
        <li class="flex gap-3 text-gray-500">
          <span class="shrink-0">{e.date}</span>
          <span class="truncate text-gray-400">{e.message}</span>
          <a
            href={`${REPO}/commit/${e.fullHash}`}
            target="_blank"
            rel="noopener noreferrer"
            class="shrink-0 text-blue-500 hover:text-blue-400"
          >{e.hash}</a>
        </li>
      ))}
    </ul>
  </section>
)}
